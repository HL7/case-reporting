<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition
    xmlns="http://hl7.org/fhir">
    <id value="eicr-encounter"/>
    <meta>
        <versionId value="23"/>
        <lastUpdated value="2019-08-27T16:51:21.000-04:00"/>
    </meta>
    <url value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-encounter"/>
    <version value="1.0.0"/>
    <name value="Eicr_Encounter"/>
    <title value="eICR Encounter"/>
    <status value="active"/>
    <experimental value="false"/>
    <publisher value="HL7 Public Health Work Group"/>
    <description value="This Encounter profile represents the encounter related to the eICR event."/>
    <fhirVersion value="4.0.0"/>
    <mapping>
        <identity value="eICR-CDA"/>
        <name value="eCR FHIR to CDA Mapping"/>
        <comment value="This table maps FHIR eCR profile elements to eICR/RR CDA template elements located in the CDA eICR"/>
    </mapping>
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="Encounter"/>
    <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Encounter"/>
    <derivation value="constraint"/>
    <differential>
        <element id="Encounter">
            <path value="Encounter"/>
            <short value="eICR Encounter"/>
            <definition value="The Electronic Case Reporting Encounter profile is based on the Encounter resource and establishes the core elements, extensions, vocabularies and value sets for representing the following encounters for electronic case reporting:&#xA;&#xA;- Initial Case Report encounter related to the reported event."/>
            <mustSupport value="false"/>
            <isModifier value="false"/>
        </element>
        <element id="Encounter.identifier">
            <path value="Encounter.identifier"/>
            <definition value="Visit or encounter id."/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
            <mapping>
                <identity value="eICR-CDA"/>
                <map value="[eICR R2 STU2][RR R1 STU1] ClinicalDocument/componentOf/encompassingEncounter/id"/>
                <comment value="Encounter/visit id"/>
            </mapping>
        </element>
        <element id="Encounter.type">
            <path value="Encounter.type"/>
            <max value="1"/>
            <mustSupport value="true"/>
            <binding>
                <strength value="preferred"/>
                <description value="EncounterTypeCode"/>
                <valueSet value="https://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.88.12.80.32"/>
            </binding>
            <mapping>
                <identity value="eICR-CDA"/>
                <map value="ClinicalDocument/componentOf/encompassingEncounter/code"/>
                <comment value="Encounter type"/>
            </mapping>
        </element>
        <element id="Encounter.participant">
            <path value="Encounter.participant"/>
            <slicing>
                <discriminator>
                    <type value="type"/>
                    <path value="type"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <definition value="The provider in charge of care and the facility in which care was provided during the encounter in which the eICR was triggered"/>
            <min value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="Encounter.participant:sliceResponsibleProvider">
            <path value="Encounter.participant"/>
            <sliceName value="sliceResponsibleProvider"/>
            <short value="Responsible provider"/>
            <definition value="The provider in charge of care and the facility in which care was provided during the encounter in which the eICR was triggered"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="Encounter.participant:sliceResponsibleProvider.type">
            <path value="Encounter.participant.type"/>
            <short value="Responsible provider"/>
            <patternCodeableConcept>
                <coding>
                    <system value="http://terminology.hl7.org/CodeSystem/v3-ParticipationType"/>
                    <code value="ATND"/>
                </coding>
            </patternCodeableConcept>
        </element>
        <element id="Encounter.participant:sliceResponsibleProvider.individual">
            <path value="Encounter.participant.individual"/>
            <definition value="The provider in charge of care and the facility in which care was provided during the encounter in which the eICR was triggered"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitioner"/>
            </type>
        </element>
        <element id="Encounter.period">
            <path value="Encounter.period"/>
            <short value="Patient encounter start and end times"/>
            <definition value="Start and end times of the patient encounter in which the eICR was triggered"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="Encounter.period.start">
            <path value="Encounter.period.start"/>
            <mapping>
                <identity value="CDA"/>
                <map value="ClinicalDocument/componentOf/encompassingEncounter/effectiveTime/low"/>
                <comment value="Admission/Visit Date/Time"/>
            </mapping>
        </element>
        <element id="Encounter.period.end">
            <path value="Encounter.period.end"/>
            <mapping>
                <identity value="CDA"/>
                <map value="ClinicalDocument/componentOf/encompassingEncounter/effectiveTime/high"/>
                <comment value="Discharge/Visit end Date/Time"/>
            </mapping>
        </element>
        <element id="Encounter.diagnosis">
            <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name">
                <valueString value="Diagnosis"/>
            </extension>
            <path value="Encounter.diagnosis"/>
            <mustSupport value="true"/>
            <mapping>
                <identity value="eICR-CDA"/>
                <map value="[eICR R2 STU2] Encounter Diagnosis (V2)"/>
            </mapping>
        </element>
        <element id="Encounter.diagnosis.extension">
            <path value="Encounter.diagnosis.extension"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="url"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
        </element>
        <element id="Encounter.diagnosis.extension:eICRTriggerCodeFlag">
            <path value="Encounter.diagnosis.extension"/>
            <sliceName value="eICRTriggerCodeFlag"/>
            <short value="eICR Trigger Code Flag"/>
            <definition value="A flag to indicate that the **target** reference represents a triggering event and caused the eCR to be generated. It is used in the eICR profile in the following sections:;&#xA;&#xA;- Encounters Section;&#xA;- Problem Section;&#xA;&#xA;- Plan of Treatment Section;&#xA;- Results Section"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-trigger-code-flag-extension"/>
            </type>
            <mapping>
                <identity value="eICR-CDA"/>
                <map value="[eICR R2 STU2] Initial Case Report Trigger Code Problem Observation"/>
            </mapping>
        </element>
        <element id="Encounter.diagnosis.condition">
            <path value="Encounter.diagnosis.condition"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-condition"/>
            </type>
            <mapping>
                <identity value="eICR-CDA"/>
                <map value="[eICR R2 STU2] Problem Observation (V3)"/>
            </mapping>
        </element>
        <element id="Encounter.location">
            <path value="Encounter.location"/>
            <short value="eICR encounter location"/>
            <definition value="Location of the facility in which the eICR encounter took place"/>
            <max value="1"/>
            <mustSupport value="true"/>
            <isModifier value="false"/>
            <mapping>
                <identity value="eICR-CDA"/>
                <map value="[eICR R2 STU2] ClinicalDocument/componentOf/encompassingEncounter/location/healthCareFacility/code"/>
            </mapping>
        </element>
        <element id="Encounter.location.location">
            <path value="Encounter.location.location"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-location"/>
            </type>
            <mustSupport value="false"/>
            <isModifier value="false"/>
        </element>
        <element id="Encounter.location.location.type">
            <path value="Encounter.location.location.type"/>
            <mapping>
                <identity value="CDA"/>
                <map value="ClinicalDocument/componentOf/encompassingEncounter/location/healthCareFacility/code"/>
                <comment value="Hospital Unit"/>
            </mapping>
        </element>
        <element id="Encounter.serviceProvider">
            <path value="Encounter.serviceProvider"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/ecr/StructureDefinition/ecr-organization"/>
            </type>
            <mustSupport value="true"/>
        </element>
    </differential>
</StructureDefinition>