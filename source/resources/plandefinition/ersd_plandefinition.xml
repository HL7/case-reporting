<PlanDefinition>
  <id value="ecr-knowledge-distribution"/>
  <url value="http://hl7.org/fhir/us/ecr/PlanDefinition/ecr-knowledge-distribution"/>
  <version value="0.1"/>
  <name value="ecr-knowledge-distribution"/>
  <title value="Knowledge Definition Sample Instance"/>
  <type>
    <coding>
      <system value="http://hl7.org/fhir/plan-definition-type"/>
      <code value="eca-rule"/>
      <display value="ECA Rule"/>
    </coding>
  </type>
  <status value="draft"/>
  <date value="2018-08-19"/>
  <effectivePeriod>
    <start value="2018-09-01"/>
  </effectivePeriod>
  <relatedArtifact>
    <type value="depends-on"/>
    <display value="RCTC Value Set Bundle of Trigger Codes"/>
  </relatedArtifact>
  <action id="orchestration">
    <description value="orchestration"/>
    <textEquivalent value="Pick between the two sequence options based on rules processing: Healthcare-based processing, or RCKMS Rules Processing on AIMS Platform"/>
    <selectionBehavior value="exactly-one"/>
    <action id="healthcare-based">
      <description value="Healthcare-based Rules processing workflow"/>
      <textEquivalent value="Rules processing, clinical feedback, eicr, route and send"/>
      <condition>
        <kind value="applicability"/>
      </condition>
      <action id="rules-processing">
        <description value="Rules processing"/>
        <textEquivalent value="Rules Processing is executed on Healthcare platform"/>
      </action>
      <action id="clinical-feedback">
        <description value="clinical feedback"/>
        <textEquivalent value="create clinical feedback per rules"/>
        <condition>
          <kind value="applicability"/>
        </condition>
      </action>
      <action id="eicr">
        <description value="eicr"/>
        <textEquivalent value="create: initial eicr, periodic update eicr, close out eicr"/>
        <selectionBehavior value="at-most-one"/>
        <action id="create-eicr">
          <description value="Initial creation of eICR"/>
          <textEquivalent value="delay eICR construction (x hours) -  time after the start of the encounter before a triggered eICR should be composed and sent"/>
          <relatedAction>
            <actionId value="orchestration"/>
            <relationship value="after-end"/>
            <offsetDuration>
              <value value="6"/>
              <unit value="h"/>
            </offsetDuration>
          </relatedAction>
        </action>
        <action id="periodic-eicr">
          <description value="eICR periodic update"/>
          <textEquivalent value="eICR periodic update (y hours) – the time after an initial eICR transmission to send new eICRs as updates for long episodes of care"/>
          <condition>
            <kind value="applicability"/>
          </condition>
          <condition>
            <kind value="stop"/>
          </condition>
          <relatedAction>
            <actionId value="create-eicr"/>
            <relationship value="after-end"/>
            <offsetDuration>
              <value value="48"/>
              <unit value="h"/>
            </offsetDuration>
          </relatedAction>
        </action>
        <action id="close-out-eicr">
          <description value="eICR episode of care close out"/>
          <textEquivalent value="eICR episode of care close out (z hours) – the time after the end of an episode of care for a final eICR will be sent when there has been one or more trigger events"/>
          <condition>
            <kind value="applicability"/>
          </condition>
        </action>
      </action>
      <action id="route-and-send">
        <description value="route and sent eicr"/>
        <textEquivalent value="Route and send eicr per rules processing"/>
        <condition>
          <kind value="applicability"/>
        </condition>
      </action>
    </action>
    <action id="aims-platform-rules-processing">
      <description value="Platform-based Rules processing workflow"/>
      <textEquivalent value="eicr, send from clinical care to platform, platform rules-processing, creation of clinical feedback"/>
      <action id="eicr">
        <description value="eicr"/>
        <textEquivalent value="create: initial eicr, periodic update eicr, close out eicr"/>
        <selectionBehavior value="at-most-one"/>
        <action id="create-eicr">
          <description value="Initial creation of eICR"/>
          <textEquivalent value="delay eICR construction (x hours) -  time after the start of the encounter before a triggered eICR should be composed and sent"/>
          <relatedAction>
            <actionId value="orchestration"/>
            <relationship value="after-end"/>
            <offsetDuration>
              <value value="6"/>
              <unit value="h"/>
            </offsetDuration>
          </relatedAction>
        </action>
        <action id="periodic-eicr">
          <description value="eICR periodic update"/>
          <textEquivalent value="eICR periodic update (y hours) – the time after an initial eICR transmission to send new eICRs as updates for long episodes of care"/>
          <condition>
            <kind value="applicability"/>
          </condition>
          <condition>
            <kind value="stop"/>
          </condition>
          <relatedAction>
            <actionId value="create-eicr"/>
            <relationship value="after-end"/>
            <offsetDuration>
              <value value="48"/>
              <unit value="h"/>
            </offsetDuration>
          </relatedAction>
        </action>
        <action id="close-out-eicr">
          <description value="eICR episode of care close out"/>
          <textEquivalent value="eICR episode of care close out (z hours) – the time after the end of an episode of care for a final eICR will be sent when there has been one or more trigger events"/>
          <condition>
            <kind value="applicability"/>
          </condition>
        </action>
      </action>
      <action id="send-clinical-care-platform">
        <description value="send eicr from clinical care to platform"/>
        <textEquivalent value="Send from clinical care to platform"/>
      </action>
      <action id="platform-rules-processing">
        <description value="platform rules processing"/>
        <textEquivalent value="Platform rules processing"/>
      </action>
      <action id="create-clinical-feedback">
        <description value="create clinical feedback per results of rules processing"/>
        <textEquivalent value="create clinical feedback per rules"/>
      </action>
    </action>
  </action>
</PlanDefinition>